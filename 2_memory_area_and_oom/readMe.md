# 第2章 java内存区域与内存溢出异常

## 1 运行时数据区域
&emsp;&emsp;Java虚拟机在执行Java程序的过程中会把它所管理的内存划分为若干个不同的数据区域。
如图2-1所示。

  ![Image text](https://github.com/hhtqaq/jvmnotes/raw/master/2_memory_area_and_oom/img/runtime_data_area.png)

### 1.1 程序计数器
&emsp;&emsp;程序计数器是一块较小的内存空间，它可以看作是当前线程锁执行的字节码的行号指示
器。我的理解就是给每个字节码加了一个行号的标记，然后循环，分支，跳转，异常处理线程恢复
可以依赖它。_**线程私有，互不影响**_。

**_备注：_**

&emsp;&emsp;如果线程执行的是Native方法，这个计数器值则为空（Underfined），此内存区域
是唯一一个在java虚拟机规范中没有规定任何oom情况的区域。

### 1.2 Java虚拟机栈
&emsp;&emsp;虚拟机栈描述的是Java方法执行的内存模型：每个方法在执行的同时会创建一个栈帧
用于存储局部变量表、操作数栈、动态链接、方法出口等信息。局部变量表所需要的内存空间在
编译期间就确定了。_**线程私有，互不影响**_。

**_备注：_**

&emsp;&emsp;可能会出现两种异常状况，线程请求的栈深度大于虚拟机所允许的深度，将抛出StackOver
flowError（虚拟机所允许的深度跟设置线程的大小有关-Xss默认1M）;如果虚拟机栈可以动态扩展
，扩展式无法申请到足够的内存，就会抛出oom错误。

